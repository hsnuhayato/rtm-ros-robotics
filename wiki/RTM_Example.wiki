#summary RTMサンプルプログラム

= シンプルな移動ロボットシミュレータのGUI操作サンプル =

== 概要 ==

http://www.openrtm.org/openrtm/ja/node/819
より一部抜粋．

python版に標準で添付されているRTコンポーネントサンプル．GUIのスティックをドラッグして移動した値を速度指令として移動ロボットのシミュレーションを行うサンプル．

== 準備 ==

0. サンプルファイルの差し替え

Ubuntu側のサンプルには一部バグがあるため，
[http://rtm-ros-robotics.googlecode.com/svn/wiki/TkMobileRobotSimulator.py バグフィックス版]を用意した．

/usr/share/OpenRTM-aist/examples/python/MobileRobotCanvas
以下のものと差し替えてほしい．

1. ネームサーバの起動

CORBAのネームサーバを起動する．

Ubuntuの場合は，
{{{
 > rtm-naming
}}}

Windowsの場合は，「スタートメニュー」→「全てのプログラム」→「OpenRTM-aist」→「Python」→「tools」→「Start Naming Service」

2. eclipseの起動

Ubuntuの場合，インストールしてすぐの状態の場合，同じターミナルだと環境変数の反映がされてないので，必ず
{{{
 > source ~/.bashrc
}}}
を行う．

3. RTSystemEditorの起動

Windows，Ubuntuともに，eclipseを初めて起動する場合は，上部メニューバーの「ウィンドウ」→「パースペクティブを開く」→「その他」を選択し，出てきたウィンドウの中から「RT System Editor」を選び「OK」を押す．

4. コンポーネントの立ち上げ

Ubuntuの場合，/usr/share/OpenRTM-aist/examples/python/以下にサンプルがあるのでそれを起動．

まずはターミナルを一つ上げて，
{{{
 > cd /usr/share/OpenRTM-aist/examples/python/TkJoyStick
 > python ./TkJoyStickComp.py
}}}
とする．

もし，ライブラリが不足していて怒られるようならば，
{{{
 > sudo apt-get install python-tk
}}}
を実行する．

次に別のターミナル，あるいは同じターミナル内で新しくタブを開き，
{{{
 > cd /usr/share/OpenRTM-aist/examples/python/MobileRobotCanvas
 > python ./TkMobileRobotSimulator.py
}}}
とする．

もし，また，ライブラリが不足していて怒られるようならば，
{{{
 > sudo apt-get install tix
}}}
を実行する．

そして，「Tk Mobile Robot Simulator」側の右側にある「Create」ボタンを一回押す．

一方，Windowsの場合，
「スタートメニュー」→「全てのプログラム」→「OpenRTM-aist」→「Python」→「components」→「examples」→「TkJoyStickComp.py」
および
「スタートメニュー」→「全てのプログラム」→「OpenRTM-aist」→「Python」→「components」→「examples」→「TkMobileRobotSimulator.py」
を起動し，同じく「Create」ボタンを一回押す．

すると，以下の画面が出るはず．

[http://rtm-ros-robotics.googlecode.com/svn/wiki/tkmobilerobot_simulator_init.png]

5, RTSystemEditor上でのコンポーネント接続

左上の「On」と書かれたボタンを一回押してSystemDiagramの画面を表示して，左側の「Name Service View」のところに見えている2つのコンポーネントをSystem Diagram上にドラッグアンドドロップする．接続は片側のコンポーネントのポートからもう一方のコンポーネントのポートへドラッグアンドドロップで接続する．

その際の接続図は以下のようになる．

[http://rtm-ros-robotics.googlecode.com/svn/wiki/connection_for_tkmobilerobotsimulator.png]


== 実行 ==

RTSystemEditor上でのコンポーネントのアクティベートして，サンプルの動作確認を行う．

System Diagramの何もないところで，右クリックして，「All Activate」を選択することで，各々のコンポーネントが動き出し，画面上のジョイスティックからシミュレータ内の移動ロボットに速度指令を与えることができるようになる．