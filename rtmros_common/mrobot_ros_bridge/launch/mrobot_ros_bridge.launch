<launch>
  <!--
      roslaunch mrobot_ros_bridge.launch nameserver:=192.168.1.1
      if you want to use joy, please press pairning after launching this
  -->
  <!-- BEGIN:openrtm setting -->
  <arg name="nameserver" default="157.82.4.143" />
  <env name="RTCTREE_NAMESERVERS" value="$(arg nameserver)" />
  <arg name="openrtm_args" value='-o "corba.nameservers:$(arg nameserver):2809" -o "naming.formats:%n.rtc" -o "logger.file_name:/tmp/rtc%p.log"' />
  <!-- END:openrtm setting -->
  <node name = "MobileRobotROSBridgeComp"
	pkg  = "mrobot_ros_bridge"
	type = "MobileRobotROSBridgeComp"
	args = "$(arg openrtm_args)"
	output = "screen"/>
  <machine name="localhost" address="localhost" user="root" ros-root="$(env ROS_ROOT)" ros-package-path="$(env ROS_PACKAGE_PATH)" default="true" />
  <node pkg="ps3joy" name="ps3joy" type="ps3joy.py" output="screen" machine="localhost"/>
  <node pkg="joy" name="joy_node" type="joy_node" output="screen"/>
  <node pkg="mrobot_ros_bridge" name="joy_teleop" type="joy_teleop.py" output="screen"/>

  <!-- BEGIN:openrtm connection -->
  <node name="rtmlaunch" pkg="openrtm" type="rtmlaunch.py" args="$(find mrobot_ros_bridge)/launch/mrobot_ros_bridge.launch" output="screen"/>
  <rtconnect from="Odometry0.rtc:ResultLocalization" to="MobileRobotROSBridge0.rtc:in" />
  <rtconnect from="BeegoController0.rtc:TargetVelocity" to="MobileRobotROSBridge0.rtc:out" />
  <rtactivate component="MobileRobotROSBridge0.rtc" />
  <!-- END:openrtm connection -->

  <sphinxdoc><![CDATA[
This script starts rtm-ros bridge compoent, you nedd to launch joystcik related software to control the real robot.
  ]]></sphinxdoc>
</launch>

