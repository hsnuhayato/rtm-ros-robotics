<launch>
  <arg name="nameserver" default="localhost" />
  <env name="RTCTREE_NAMESERVERS" value="$(arg nameserver)" />
  <arg name="openrtm_args" value='-o "corba.nameservers:$(arg nameserver):2809" -o "naming.formats:%n.rtc" -o "exec_cxt.periodic.type: SynchExtTriggerEC" -o "logger.file_name:/tmp/rtc%p.log"' />
  <!-- END:openrtm setting -->
  <node pkg="openhrp3" name="grxui" type="grxui.sh"
	args="$(find mrobot_ros_bridge)/launch/SimulationProject.xml"/>
  <node name = "IISMobileRobotControllerComp"
	pkg  = "mrobot_ros_bridge"
	type = "IISMobileRobotControllerComp"
	args = "$(arg openrtm_args)"
	output = "screen"/>
  <node name = "openhrp_controller_bridge"
	pkg  = "openhrp3"
	type = "openhrp-controller-bridge"
	args = "--server-name IISMobileRobotControllerComp
		--out-port angle:JOINT_VALUE
		--out-port velocity:JOINT_VELOCITY
		--in-port torque:JOINT_TORQUE
		$(arg openrtm_args)"
	output = "screen"/>

  <!-- BEGIN:openrtm connection -->
  <node name="rtmlaunch" pkg="openrtm" type="rtmlaunch.py" args="$(find mrobot_ros_bridge)/launch/mrobot_simulator.launch" output = "screen"/>
  <rtconnect from="IISMobileRobotController0.rtc:torque" to="IISMobileRobotControllerComp(Robot)0.rtc:torque" />
  <rtconnect from="IISMobileRobotControllerComp(Robot)0.rtc:velocity" to="IISMobileRobotController0.rtc:velocity" />
  <rtconnect from="IISMobileRobotControllerComp(Robot)0.rtc:angle" to="IISMobileRobotController0.rtc:angle" />
  <rtactivate component="IISMobileRobotController0.rtc" />
  <!-- END:openrtm connection -->
</launch>