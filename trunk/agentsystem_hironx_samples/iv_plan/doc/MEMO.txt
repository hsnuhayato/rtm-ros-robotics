# MEMO.txt

v_pa10.py
 末廣先生バージョンは単位が[m]
 統合検証仕様は[mm]
 そのための変更を行ったファイル
 置き換えて問題なければ， PA10/PA10RMRC/myRTC/tools/v_robot/ 
 へコピーする
 (これをしないと，PA10が1/1000なので見えない)

産総研のモジュール
 GraspPlan: 把握プランナ本体
 GraspConsumerSample: モジュールの動作確認用サンプル
 openhrp3.1のライブラリが必要


環境設定：
 - ivplanでmake
 - 以下は，必要に応じて編集する
   set_env.py
    pythonがファイルをimportする場所
   rtc.conf
    RT-middlewareのネームサーバとかの設定
   comp.sh
    コンポーネント起動にこのスクリプトを使う場合  





VPython:
 sudo aptitude install python-visual libgtkglext1 libgtkglext1-dev

 * VPythonがネイティブで動作しない場合がある
   import visual
   visual.sphere()
   で確認できる．

 - ダメな場合は，以下のように libgdkglextの関数で死ぬ

 #0  0x014b920b in gdk_gl_get_proc_address ()
   from /usr/lib/libgdkglext-x11-1.0.so.0
 #1  0x01470bed in Gdk::GL::get_proc_address(char const*) ()
   from /usr/lib/libgdkglextmm-x11-1.2.so.0

 #1の引数は "display_kernel::getProcAddress" で，
 VPythonのソースのsrc/core/display_kernel.cpp 
 335行目の

 if (getProcAddress("display_kernel::getProcAddress") != notImplemented)
   glext.init( *this );

 をコメントアウトすると動く.

 なぜ notImplemented にならないかは不明．

 この回避策を使うため，set_env.pyに以下を追加

 import sys
 sys.path.append('/usr/local/lib/python2.6/site-packages/')

 ちなみに，VPythonのコンパイル時にはboostのヘッダを修正する必要がある．
 どこを編集すべきかは，付属文書INSTALL.txtに記載がある．

vpython:
 - compile the latest version of vpython
 - patch it
 - modify a boost header
 - symbolic link is wrong by default. 
    ln -s /usr/lib/libboost_python-mt-py26.so /usr/lib/libboost_python-mt.so
 

decomposition of the table into triangle mesh
angular limits

xwininfo
recordmydesktop --windowid 0x....
mencoder out.ogv -ovc lavc -oac mp3lame -o out.avi



TODO:
 - simple grasp planning RTC
 - simple recognition RTC


 - separate parameter


- grasp_zoffset: grasp plan considering the shape of the object
- separate the hole detection
- appdist: insert an intermediate goal before inserting partsB into
  partsA

- the function that users can define the relationship between
  marker and object

- user defined object detector
- planning using waist
- planning using both arms (and waist)

- check joint limits when joint angles are set
- endeffector position&pose (need to compute)


- the structure of classes
 - the algorithms and mathematical expressions
- about grasp planning
- the relation among frames
 - camera, arm, target object (marker), grasp, approach
- how to get transformations between them
- RRT:
 - input & output
 - parameters users can change



河井さんに送った仕様でタスクを書いてみる

t_nextage/ivplan/arm_motion
                /scenario

         /rmrc_tools/PA10RMRC_tools
                    /rtc_handle
                    /rtm_idl

externals/GraspPlan

basesys/Sense
       /HiroCapture
       /JointStatePublisher
       /SequencePlayerService



pi回すとおかしくなるバグを直す
